# Qt 5

Компания прекратила распространять нормальный дистрибутив и установка теперь возможна только онлайн и с учетной запись на сайт Qt.

Программа `aqt` позволяет скачать и установить необходимые компоненты.

Установленный комплект программ и библиотек Qt привязан к директории установки.

Для смены директории необходимо воспользоваться `aqt`.

Для Qt Creator требуется установка библиотек vcredist_msvc2015_x64. Для этого необходимы права администратора.

## Установка Qt с помощью `aqt` (Another unofficial Qt Installer)

### Подготовка к установке

* Установить Python 3.9
* Обновить `pip`

```
python -m pip install -U pip
```

* Установить `aqt` (или обновить, если уже установлен)

```
pip install -U aqtinstall
```

### Порядок установки

* Для установки требуются два командных файла:
  * скрипт `aqt_install_qt5.cmd` с командами `aqt`
  * скрипт `build_static_qt5.ps1` для сборки статической версии Qt

В скрипте `aqt_install_qt5.cmd` можно выбрать для установки только требуемые компоненты.

* Создать директорию `D:\Qt5`
* Скопировать скрипты `aqt_install_qt5.cmd` и `build_static_qt5.ps1` в `D:\Qt5`
* Открыть командную строку `Win+R`, напечатать `cmd`, нажать `ВВОД`
* Сменить текущую директорию `cd /d D:\Qt5`
* Выполнить команду `aqt_install_qt5.cmd`
* Командой `powershell` перейти в среду PowerShell
* Выполнить команду  `.\build_static_qt5.ps1`

### Пути к основным файлам

```
D:\Qt5\5.14.2\mingw73_64\bin\qmake.exe
D:\Qt5\5.15.2\mingw81_64\bin\qmake.exe
D:\Qt5\6.2.0\mingw81_64\bin\qmake.exe

D:\Qt5\Static\5.15.2-Static\bin\qmake.exe

D:\Qt5\Tools\mingw730_64\bin\g++.exe
D:\Qt5\Tools\mingw730_64\bin\gcc.exe
D:\Qt5\Tools\mingw730_64\bin\gdb.exe

D:\Qt5\Tools\mingw810_64\bin\g++.exe
D:\Qt5\Tools\mingw810_64\bin\gcc.exe
D:\Qt5\Tools\mingw810_64\bin\gdb.exe

D:\Qt5\Tools\QtCreator\bin\qtcreator.exe

D:\Qt5\Tools\vcredist\vcredist_msvc2015_x64.exe
```

## Подключение в Qt Creator

### Версии компиляторов

* Для версии Qt 5.14.2 должен использоваться компилятор 7.3.0
* Для версии Qt 5.15.2 должен использоваться компилятор 8.1.0

### Создание комплекта в Qt Creator

* Открыть окно настроек `Инструменты` → `Параметры...`
* Слева выбрать страницу `Комплекты`.
* На вкладке `Компиляторы` добавить компиляторы C и C++, на вкладке `Отладчики` добавить отладчик, на вкладке `Профили Qt` добавить собранную библиотеку Qt, указав путь до `qmake.exe`.

| Название       | Путь                                     |
|----------------|------------------------------------------|
| Профиль Qt     | `D:\Qt5\5.15.2\mingw81_64\bin\qmake.exe` |
| Компилятор C++ | `D:\Qt5\Tools\mingw810_64\bin\g++.exe`   |
| Компилятор C   | `D:\Qt5\Tools\mingw810_64\bin\gcc.exe`   |
| Отладчик       | `D:\Qt5\Tools\mingw810_64\bin\gdb.exe`   |

* Нажать `Применить`
* На вкладке `Комплекты` собрать комплект для версии Qt5 с названием `Qt 5.15.2`

### Для статической версии Qt

| Название       | Путь                                        |
|----------------|---------------------------------------------|
| Профиль Qt     | `D:\Qt5\Static\5.15.2-Static\bin\qmake.exe` |
| Компилятор C++ | `D:\Qt5\Tools\mingw810_64\bin\g++.exe`      |
| Компилятор C   | `D:\Qt5\Tools\mingw810_64\bin\gcc.exe`      |
| Отладчик       | `D:\Qt5\Tools\mingw810_64\bin\gdb.exe`      |
